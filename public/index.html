<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">

		<!-- The core Firebase JS SDK is always required and must be listed first -->
		<script src="/__/firebase/7.14.2/firebase-app.js"></script>
		<script src="/__/firebase/7.14.2/firebase-functions.js"></script>

		<!-- Initialize Firebase -->
		<script src="/__/firebase/init.js"></script>

	</head>

	<body>
		<button id='allFightersBtn' style='background:green;width: 100px; height: 100px;'>Get all fighters</button>
		<button id='allFightsBtn' style='background: brown;width: 100px; height: 100px;'>Get all fights</button>
		<button id='fighterByIdBtn' style='background: orange;width: 100px; height: 100px;'>Get fighter by fid</button>
		<button id='fighterByNameBtn' style='background: yellow;width: 100px; height: 100px;'>Get fighter by name</button>
		<button id='fightersByCountryBtn' style='background:red;width: 100px; height: 100px;'>Get fighters by country</button>

		<!--TEST script to demonstrate how to access server-side functions-->
		<script>
			var functions = firebase.functions();
			window.onload = function () {
				/*###########################################################################*/
				//All Fighters button
				let allFightersBtn = document.getElementById('allFightersBtn');
				allFightersBtn.addEventListener('click', async function () {
					//Get the function we need to use
					let getAllFighters = functions.httpsCallable('fighters-getAllFighters');
					//Use it
					await getAllFighters()
					.then(fighters => {
						console.log(fighters);
					})
					.catch(err => {
						console.log(err);
					});
				});
				/*###########################################################################*/
				//All fights button
				let allFightsBtn = document.getElementById('allFightsBtn');
				allFightsBtn.addEventListener('click', async function () {
					//Get the function we need to use
					let getAllFights = functions.httpsCallable('fights-getAllFights');
					//Use it
					await getAllFights()
					.then(fights => {
						console.log(fights);
					})
					.catch(err => {
						console.log(err);
					});
				});
				/*###########################################################################*/
				//Single fighter by id
				let fighterByIdBtn = document.getElementById('fighterByIdBtn');
				fighterByIdBtn.addEventListener('click', async function () {
					let fighterId = 29688
					//Get the function we need to use
					let getFighterById = functions.httpsCallable('fighters-getFighterById');
					//Use it
					await getFighterById({"fighterId": fighterId})
					.then(fighter => {
						console.log(fighter);
					})
					.catch(err => {
						console.log(err);
					});
				});
				/*###########################################################################*/
				//Single fighter by name
				let fighterByNameBtn = document.getElementById('fighterByNameBtn');
				fighterByNameBtn.addEventListener('click', async function () {
					let fighterName = "Jon Jones";
					//Get the function we need to use
					let getFighterByName = functions.httpsCallable('fighters-getFighterByName');
					//Use it
					await getFighterByName({"fighterName": fighterName})
					.then(fighter => {
						console.log(fighter);
					})
					.catch(err => {
						console.log(err);
					});
				});
				/*###########################################################################*/
				//All Fighters button
				let fightersByCountryBtn = document.getElementById('fightersByCountryBtn');
				fightersByCountryBtn.addEventListener('click', async function () {
					let country = "USA"
					//Get the function we need to use
					let getFightersByCountry = functions.httpsCallable('fighters-getFightersByCountry');
					//Use it
					await getFightersByCountry({ "country": country })
					.then(fighters => {
						console.log(fighters);
					})
					.catch(err => {
						console.log(err);
					});
				});
				/*###########################################################################*/
			}
		</script>
	</body>

</html>