<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">

		<!-- The core Firebase JS SDK is always required and must be listed first -->
		<script src="/__/firebase/7.14.2/firebase-app.js"></script>
		<script src="/__/firebase/7.14.2/firebase-functions.js"></script>

		<!-- Initialize Firebase -->
		<script src="/__/firebase/init.js"></script>

	</head>

	<body>
		<button id='testBtn' style='background:green;width: 100px; height: 100px;'>SIMPLE TEST</button>
		<button id='dbTestBtn' style='background:black; color: white; width: 100px; height: 100px;'>DB TEST</button>

		<!--TEST script to demonstrate how to access server-side functions-->
		<script>
			var functions = firebase.functions();
			window.onload = function () {
				//test btn
				let testBtn = document.getElementById('testBtn');
				testBtn.addEventListener('click', async function () {
					//Get the function we need to use
					let serverFunction = functions.httpsCallable('test');
					//Use it
					let serverMessage = await serverFunction({ 'message': 'I got tested.' });
					console.log(serverMessage);
				});

				//db button
				let dbBtn = document.getElementById('dbTestBtn');
				dbBtn.addEventListener('click', async function() {
					let serverFunction = functions.httpsCallable('databaseTest');
					let serverMessage = await serverFunction();
					//Should return full collection, which consists of only 1 document
					console.log(serverMessage);
				});
			}
		</script>
	</body>

</html>